<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Cognifide Labs - Slice</title>
<link rel="shortcut icon" href="../images/favicon.png"/>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="../css/cognifide.github.css">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>

    <script>
        $(function () {
            $("#footer").load("../includes/footer.html");
        });
        $(function () {
            $("#navigation").load("../includes/navigation.html");
        });
    </script>

</head>

<body>
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-MQQFWZ"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MQQFWZ');</script>
<!-- End Google Tag Manager -->
<div id="navigation"></div>

<div class="field-promo">
    <h1>
            <span>Cognifide Labs<br></span>
            <span style="font-size: 2rem; line-height: 1;">We create. We boost. We share.</span>
    </h1>
</div>


<div class="container" style="margin-top: 30px; margin-bottom: 70px">
    <h2>Slice - make AEM development easier</h2>
	<hr class="divider">
	<div class="row">
	<div class="col-md-6">
	<h3>Full Documentation</h3>
	<p>The full documentation documentation for Slice framework can be found at Slice Confluence. You can find there:<p>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Slice concepts and quick start<br>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Mapping Sling resources to Java objects<br>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Sightly support<br>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Upgrade and installation notes<br>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Add-ons documentation<br>
	<i class="fa fa-check-circle cog-green" style="margin: 10px;"></i>
	Slice roadmap and development processes<br>
	<div class="button-more bottom-link"><a href="https://cognifide.atlassian.net/wiki/display/SLICE/About+Slice+-+4.2" title="Slice Confluence" target="_blank">Go to Slice Documentation</a></div>
	</div><div class="col-md-6">
	<h3>Slice API</h3>
	<p>API documentation is available at <a href="http://cognifide.github.io/Slice/apidocs/4-2-0/" title="Slice API Docs" target="_blank">http://cognifide.github.io/Slice/apidocs/4-2-0/</a></p>
	<a href="http://cognifide.github.io/Slice/apidocs/4-2-0/" target="_blank" title="Slice API Docs" alt="Slice API Docs"><img src="../images/slice-api-docs.png" /></a>
	</div>
	</div>
	<hr>
	
	<h3>Slice in a nutshell</h3>
	<h4>Separation of concerns</h4>
	

    <p>No more business logic in your view (JSP, Sightly scripts) - business logic's place is in Java classes and Slice knows it!</p>
    <div class="row">    
	<div class="col-md-6">
        <b>Slice loves Sightly. Sightly loves Slice.</b><br>
		<p>Both are perfect match. Seamless integration you will love:</p>
    

    <!-- HTML generated using hilite.me -->
<pre
	style="margin: 0; line-height: 125%"><span style="color: #007700">&lt;div</span> <span
	style="color: #0000CC">data-sly-use.model=</span><span style="background-color: #fff0f0">&quot;com.example.text.TextModel&quot;</span><span
	style="color: #007700">&gt;</span>
	<span style="color: #007700">&lt;p&gt;</span>${model.text}<span style="color: #007700">&lt;p&gt;</span>
<span style="color: #007700">&lt;/div&gt;</span>
</pre>
</div>

    <div class="col-md-6">
        <b>JSPs made clean and tidy</b>
<p>no more these ugly scriptlets</p>
   

    <!-- HTML generated using hilite.me -->
	<pre style="margin: 0; line-height: 125%"><span style="color: #007700">&lt;slice:lookup</span> <span
			style="color: #0000CC">var=</span><span style="background-color: #fff0f0">&quot;model&quot;</span> <span
			style="color: #0000CC">type=</span><span style="background-color: #fff0f0">&quot;</span><span
			style="color: #008800; font-weight: bold">&lt;%=</span>com<span style="color: #333333">.</span><span
			style="color: #0000CC">example</span><span style="color: #333333">.</span><span
			style="color: #333333">.</span><span style="color: #0000CC">text</span><span
			style="color: #333333">.</span><span style="color: #0000CC">TextModel</span><span
			style="color: #008800; font-weight: bold">%&gt;</span><span
			style="background-color: #fff0f0">&quot;</span> <span style="color: #007700">/&gt;</span>
<span style="color: #007700">&lt;p&gt;</span>${model.text}<span style="color: #007700">&lt;/p&gt;</span>
	</pre>
	</div>
	
    <div class="col-md-12">
        <p>&nbsp;</p>
		<b>Reusable Java models</b> which expose data for your view - note same model can be used for Sightly and JSP
        components - one model to feed them all!
    

    <!-- HTML generated using hilite.me -->
    <pre style="margin: 0; line-height: 125%">
<span style="color: #555555; font-weight: bold">@SliceResource</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">TextModel</span> <span style="color: #333333">{</span>

	<span style="color: #555555; font-weight: bold">@JcrProperty</span>
	<span style="color: #008800; font-weight: bold">private</span> String text<span style="color: #333333">;</span>

	<span style="color: #008800; font-weight: bold">public</span> String <span style="color: #0066BB; font-weight: bold">getText</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
		<span style="color: #008800; font-weight: bold">return</span> text<span style="color: #333333">;</span>
	<span style="color: #333333">}</span>
<span style="color: #333333">}</span>
</pre>
	</div>
</div>
<h4>Mapping resources into Java objects</h4>
<p>Slice allows you to map a resource into plain Java object. It's annotation-driven, very easy to use and fully extensible, so you can write your own ways of mapping if a set of available features is not enough for your needs. Slice supports mapping of:</p>
<ul>
	<li>simple properties (String, Long, Boolean, etc) into primitives and objects</li>
    <li>simple properties into enums.</li>
    <li>multi-value properties into arrays or lists</li>
    <li>child resources into a Java object or list of objects</li>
    <li>nested resources/classes hierarchy</li>
</ul>
<p>The following code snippet demonstrates all above features in one model. It's simple - just annotate a class with @SliceResource and its fields with @JcrProperty to get auto mapping of resource properties to class fields:</p>
<div class="row">
<div class="col-md-6">
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #555555; font-weight: bold">@SliceResource</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">ComplexTextModel</span> <span style="color: #333333">{</span>

    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> String text<span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> String<span style="color: #333333">[]</span> styles<span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> AlignmentEnum alignment<span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@Children</span><span style="color: #333333">(</span>LinkModel<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">)</span>
    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> List<span style="color: #333333">&lt;</span>LinkModel<span style="color: #333333">&gt;</span> links<span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> ImageModel image<span style="color: #333333">;</span>

    <span style="color: #888888">//... do whatever business logic you want in your model</span>
<span style="color: #333333">}</span>
</pre></div>
</div><div class="col-md-6">
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">enum</span> AlignmentEnum <span style="color: #333333">{</span>
    LEFT<span style="color: #333333">,</span> RIGHT<span style="color: #333333">,</span> CENTER<span style="color: #333333">;</span>
<span style="color: #333333">}</span>

<span style="color: #555555; font-weight: bold">@SliceResource</span><span style="color: #333333">(</span>MappingStrategy<span style="color: #333333">.</span><span style="color: #0000CC">ALL</span><span style="color: #333333">)</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">LinkModel</span> <span style="color: #333333">{</span>
    <span style="color: #008800; font-weight: bold">private</span> String path<span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> String label<span style="color: #333333">;</span>
    <span style="color: #888888">//...</span>
<span style="color: #333333">}</span>

<span style="color: #555555; font-weight: bold">@SliceResource</span><span style="color: #333333">(</span>MappingStrategy<span style="color: #333333">.</span><span style="color: #0000CC">ALL</span><span style="color: #333333">)</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">ImageModel</span> <span style="color: #333333">{</span>
    <span style="color: #008800; font-weight: bold">private</span> String imagePath<span style="color: #333333">;</span>
    <span style="color: #008800; font-weight: bold">private</span> String altText<span style="color: #333333">;</span>
    <span style="color: #888888">//...</span>
<span style="color: #333333">}</span>
</pre></div>
</div>
</div>
<h4>Dependency Injection with Google Guice</h4>
<p>If your AEM components are more than simple text/image/title components (and they certainly are), then you probably need to combine their functionality with some external data or more complex business logic provided by other classes. Dependency injection allows you to do this easily and keep your code testable without boiler-plate code and unneeded arguments in methods used only to propagate a value down into the class hierarchy.</p>
<p>We took Guice as a DI container. Why it's awesome? Take a look here: Google I/O 2009 - Big Modular Java with Guice, and here to check motivation of Google Guice creators</p>
<p>To demonstrate an example of a complex component which combines use of Slice features with power of DI, take a look at the following code which is an implementation of a Twitter component.</p>
<!-- HTML generated using hilite.me --><div style="background: #f8f8f8; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #008000; font-weight: bold">&lt;div</span> <span style="color: #7D9029">data-sly-use.</span><span style="color: #7D9029">model=</span><span style="color: #BA2121">&quot;com.example.components.twitter.TwitterModel&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;ul</span> <span style="color: #7D9029">data-sly-list=</span><span style="color: #BA2121">&quot;</span><span style="color: #BC7A00">${</span>model<span style="color: #666666">.</span>tweets<span style="color: #BC7A00">}</span><span style="color: #BA2121">&quot;</span><span style="color: #008000; font-weight: bold">&gt;</span>
        <span style="color: #008000; font-weight: bold">&lt;li&gt;</span><span style="color: #BC7A00">${</span>item<span style="color: #BC7A00">}</span><span style="color: #008000; font-weight: bold">&lt;/li&gt;</span>
    <span style="color: #008000; font-weight: bold">&lt;/ul&gt;</span>
<span style="color: #008000; font-weight: bold">&lt;/div&gt;</span>
</pre></div>
<p>The model of the component is fairly simple and fully testable because you can easily mock the TwitterHandler in your unit test case.</p>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #555555; font-weight: bold">@SliceResource</span>
<span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">TwitterModel</span> <span style="color: #333333">{</span>

    <span style="color: #555555; font-weight: bold">@JcrProperty</span>
    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #333399; font-weight: bold">int</span> limit<span style="color: #333333">;</span>

    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">final</span> TwitterHandler twitterHandler<span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@Inject</span>
    <span style="color: #008800; font-weight: bold">public</span> <span style="color: #0066BB; font-weight: bold">TwitterModel</span><span style="color: #333333">(</span>TwitterHandler twitterHandler<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        <span style="color: #008800; font-weight: bold">this</span><span style="color: #333333">.</span><span style="color: #0000CC">twitterHandler</span> <span style="color: #333333">=</span> twitterHandler<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">//returns list of tweets limited by number configurable by authors</span>
    <span style="color: #008800; font-weight: bold">public</span> List<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;</span> <span style="color: #0066BB; font-weight: bold">getTweets</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        List<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;</span> tweets <span style="color: #333333">=</span> twitterHandler<span style="color: #333333">.</span><span style="color: #0000CC">readTweets</span><span style="color: #333333">();</span>
        <span style="color: #008800; font-weight: bold">return</span> tweets<span style="color: #333333">.</span><span style="color: #0000CC">subList</span><span style="color: #333333">(</span><span style="color: #0000DD; font-weight: bold">0</span><span style="color: #333333">,</span> Math<span style="color: #333333">.</span><span style="color: #0000CC">max</span><span style="color: #333333">(</span>tweets<span style="color: #333333">.</span><span style="color: #0000CC">size</span><span style="color: #333333">(),</span> limit<span style="color: #333333">));</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">//...</span>
<span style="color: #333333">}</span>
</pre></div>


<p>TwitterHandler is also very simple as it uses Twitter client (from Twitter4j library). Please note that this client is injected by Guice and you don't have to care about its configuration in the handler itself.</p>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">TwitterHandler</span> <span style="color: #333333">{</span>

    <span style="color: #555555; font-weight: bold">@Inject</span>
    <span style="color: #008800; font-weight: bold">private</span> Twitter twitterClient<span style="color: #333333">;</span> <span style="color: #888888">//Twitter4j client</span>

    <span style="color: #008800; font-weight: bold">public</span> List<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;</span> <span style="color: #0066BB; font-weight: bold">readTweets</span><span style="color: #333333">()</span> <span style="color: #333333">{</span>
        List<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;</span> tweets <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ArrayList<span style="color: #333333">&lt;</span>String<span style="color: #333333">&gt;();</span>
        List<span style="color: #333333">&lt;</span>Status<span style="color: #333333">&gt;</span> statuses <span style="color: #333333">=</span> twitterClient<span style="color: #333333">.</span><span style="color: #0000CC">getHomeTimeline</span><span style="color: #333333">();</span>
        <span style="color: #008800; font-weight: bold">for</span> <span style="color: #333333">(</span>Status status <span style="color: #333333">:</span> statuses<span style="color: #333333">)</span> <span style="color: #333333">{</span>
            tweets<span style="color: #333333">.</span><span style="color: #0000CC">add</span><span style="color: #333333">(</span>status<span style="color: #333333">.</span><span style="color: #0000CC">getText</span><span style="color: #333333">());</span>
        <span style="color: #333333">}</span>
        <span style="color: #008800; font-weight: bold">return</span> tweets<span style="color: #333333">;</span>
    <span style="color: #333333">}</span>
<span style="color: #333333">}</span>
</pre></div>

<p>The configuration is set while instantiating the twitter client by Guice. To instruct Guice how to create the client object we need to create a so called provider. You can do this in module configuration. It reads some configuration properties from repository (using ModelProvider). ContextScope instructs Guice to create such an object only once per request or OSGi service call - yes, you can reuse the TwitterHandler in you OSGi services which are request/resource agnostic - that's the power of Slice!.</p>
<!-- HTML generated using hilite.me --><div style="background: #ffffff; overflow:auto;width:auto; "><pre style="margin: 0; line-height: 125%"><span style="color: #008800; font-weight: bold">public</span> <span style="color: #008800; font-weight: bold">class</span> <span style="color: #BB0066; font-weight: bold">MyModule</span> <span style="color: #008800; font-weight: bold">extends</span> AbstractModule <span style="color: #333333">{</span>

    <span style="color: #008800; font-weight: bold">private</span> <span style="color: #008800; font-weight: bold">static</span> <span style="color: #008800; font-weight: bold">final</span> String TWITTER_CONFIG_PATH <span style="color: #333333">=</span> <span style="background-color: #fff0f0">&quot;/etc/twitter/configuration/jcr:content/twitterConfig&quot;</span><span style="color: #333333">;</span>

    <span style="color: #555555; font-weight: bold">@Provides</span>
    <span style="color: #555555; font-weight: bold">@ContextScoped</span>
    <span style="color: #008800; font-weight: bold">public</span> Twitter <span style="color: #0066BB; font-weight: bold">getTwitter</span><span style="color: #333333">(</span>ModelProvider modelProvider<span style="color: #333333">)</span> <span style="color: #333333">{</span>
        TwitterConfiguration config <span style="color: #333333">=</span> modelProvider<span style="color: #333333">.</span><span style="color: #0000CC">get</span><span style="color: #333333">(</span>TwitterConfiguration<span style="color: #333333">.</span><span style="color: #0000CC">class</span><span style="color: #333333">,</span>
                TWITTER_CONFIG_PATH<span style="color: #333333">);</span>
        ConfigurationBuilder builder <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> ConfigurationBuilder<span style="color: #333333">();</span> <span style="color: #888888">// from Twitter4j</span>
        builder<span style="color: #333333">.</span><span style="color: #0000CC">setOAuthConsumerKey</span><span style="color: #333333">(</span>config<span style="color: #333333">.</span><span style="color: #0000CC">getOAuthKey</span><span style="color: #333333">())</span>
                <span style="color: #333333">.</span><span style="color: #0000CC">setOAuthConsumerSecret</span><span style="color: #333333">(</span>config<span style="color: #333333">.</span><span style="color: #0000CC">getOAuthSecret</span><span style="color: #333333">());</span>
        TwitterFactory factory <span style="color: #333333">=</span> <span style="color: #008800; font-weight: bold">new</span> TwitterFactory<span style="color: #333333">(</span>builder<span style="color: #333333">.</span><span style="color: #0000CC">build</span><span style="color: #333333">());</span>
        <span style="color: #008800; font-weight: bold">return</span> factory<span style="color: #333333">.</span><span style="color: #0000CC">getInstance</span><span style="color: #333333">();</span>
    <span style="color: #333333">}</span>

    <span style="color: #888888">//...</span>

<span style="color: #333333">}</span>
</pre></div>

</div>

</body>

<div id="footer"></div>

</html>
